# 背包问题

标签： dp

---
## 问题描述
将若干物品装进背包，在不超过背包容纳限度的情况下，使得总价值最大。
设第i件物品的价值为v_i，大小为w_i。背包的最大容纳大小为W。
$$\max \limits_{S} \sum_{i \in S}v_i \\ s.t. \sum_{i \in S}w_i \le W$$

## 动态规划
考虑子问题，将规模减1，即n-1时候的背包问题。
设S_k是问题为k规模时候的最优解。下面分两种情况讨论：

 - 物品n不在S_n中。这时候，可以知道$S_{n-1}=S_n$就是n-1时候问题的解。这个是显然的。
 - 物品n在S_n中，这时候，可以知道$S_{n-1}=S_n - a_n$是n-1时候问题的解。这个结论没有这么显然，使用反证法证明。假设$S_n-a_n$不是n-1时候问题的最优解，记这个最优解为T。可以知道$T \cup a_n$满足上面的约束，同时它的value是大于$S_n$的。所以可以推出$S_n$并非规模为n的时候问题的最优解 => 矛盾

所以这个问题具有最优子结构。

## 递归方程
由上面的分析可以知道，
`V(n, W) = max(V(n-1, W) + V(n-1, W-wn)+vn)`
其中，第一项对应上面的Case 1， 第二项对应上面的Case 2.
对于边界条件，易得，
`V(0, W) = 0, V(n, 0) = 0`
  


